{"version":3,"file":"client.bundle.js","sources":["webpack:///webpack/bootstrap d7e7c604b86bfce53f7f","webpack:///src/client/index.js","webpack:///src/client/game.js","webpack:///lib/model.js","webpack:///lib/event.js","webpack:///lib/template.js","webpack:///src/client/views/game.js","webpack:///src/client/views/header.js","webpack:///src/client/views/content.js"],"sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d7e7c604b86bfce53f7f\n **/","import Game from './game';\n\nvar el = document.getElementById('game');\nnew Game(el, {}); \n\n\n\n\n\n/** WEBPACK FOOTER **\n ** src/client/index.js\n **/","import Model from '../../lib/model';\nimport template from '../../lib/template';\nimport gameHTML from './views/game';\nimport headerHTML from './views/header';\nimport contentHTML from './views/content';\n\nexport default class Game {\n\n  constructor(el, options) {\n    this.el = el;\n    this.el.innerHTML = template(gameHTML).render();\n\n    this.headerEl = this.el.querySelector('header');\n    this.contentEl = this.el.querySelector('.content');\n    this.goBtnEl = this.el.querySelector('.go');\n    this.goBtnEl.addEventListener('click', \n      ev => this.go(), false);\n\n    this.outcomes = new Model({\n      findAll: 'GET /outcomes'\n    });\n    this.outcomes.on('load', \n      (ev, outcomes) => this.update(outcomes));\n  }\n\n  update(outcomes) {\n    if(outcomes.bonus) {\n      this.outcomes.findAll({win: outcomes.win});  \n    }\n    this._update(outcomes);\n  }\n\n  _update(outcomes) {\n    this.headerEl.innerHTML = \n      template(headerHTML).render(outcomes);\n    this.contentEl.innerHTML = \n      template(contentHTML).render(outcomes); \n  }\n\n  go() {\n    this.outcomes.findAll();\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** src/client/game.js\n **/","import EventEmitter from './event';\n\nexport default class Model extends EventEmitter {\n\n  constructor(options) {\n    super(options);\n    let parts = options.findAll.split(' ');\n    this.method = parts[0];\n    this.url = parts[1];\n    this.transport = options.transport || XMLHttpRequest;\n  }\n\n  findAll(params) {\n    let req = new this.transport;\n    req.onreadystatechange = \n      () => this._onreadystatechange(req);\n    req.open(this.method, \n      this.url + (params ? '?win=' + params.win : ''));\n    req.send();\n  }\n\n  _onreadystatechange(req) {\n    // TODO: HANDLE NETWORK AND PARSING ERRORS\n    if(req.readyState === XMLHttpRequest.DONE) {\n      if(req.status === 200) {\n        this.emit('load', JSON.parse(req.responseText));\n      }\n    }\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** lib/model.js\n **/","export default class EventEmitter {\n\n  constructor() {\n    this.events = {};\n  }\n\n  on(ev, handler) {\n    let handlers = this.events[ev];\n    if(!handlers) {\n      return this.events[ev] = [handler]; \n    }\n    this.events[ev].push(handler);\n  }\n\n  emit(ev, data) {\n    let handlers = this.events[ev];\n    if(!handlers) return;\n    handlers.forEach(function(handler) {\n      handler(ev, data);\n    });\n  }\n}\n\n\n\n/** WEBPACK FOOTER **\n ** lib/event.js\n **/","function template(html) {\n  let re = /<%(.*)%>/g,\n      reExp = /(^\\s*(if|for|else|switch|case|break|{|})).*/g, \n      code = 'var r=[];\\n', \n      cursor = 0, match;\n  let add = function(line, js) {\n    js? (code += line.match(reExp) ? line + '\\n' : 'r.push(' + line + ');\\n') :\n        (code += line != '' ? \n      'r.push(\"' + line.replace(/\"/g, '\\\\\"').replace(/\\n/g, '') + '\");\\n' : '');\n    return add;\n  }\n  while(match = re.exec(html)) {\n    add(html.slice(cursor, match.index))(match[1], true);\n    cursor = match.index + match[0].length;\n  }\n  add(html.substr(cursor, html.length - cursor));\n  code += 'return r.join(\"\");';\n  return {\n    render: function(ctx) {\n      return (new Function(code)).apply(ctx);\n    }\n  }\n}\n\nexport default template;\n\n\n\n/** WEBPACK FOOTER **\n ** lib/template.js\n **/","let gameHTML = `\n  <header><h1>The Slot Machine</h1></header>\n  <div class='content'><h1>Hit GO! to Start Playing the Game!</h1></div>\n  <footer><button class='go'>GO!</button></footer>\n`;\n\nexport default gameHTML;\n\n\n\n/** WEBPACK FOOTER **\n ** src/client/views/game.js\n **/","let headerHTML = `\n  <h1 class='default'><% this.message.default %></h1>\n  <%if(this.message.bonus) { %>\n    <h1 class='bonus'><% this.message.bonus %></h1>\n  <% } %>\n`;\n\nexport default headerHTML;\n\n\n\n/** WEBPACK FOOTER **\n ** src/client/views/header.js\n **/","let contentHTML = `\n  <ul class='symbols'>\n  <% for(var i=0; i<this.symbols.length; i++) { %>\n    <li class='symbol'><img src='/img/<% this.symbols[i] %>' /></li>\n  <% } %>\n  </ul>\n`;\n\nexport default contentHTML;\n\n\n\n/** WEBPACK FOOTER **\n ** src/client/views/content.js\n **/"],"mappings":";AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;ACtCA;AACA;;;;;AACA;;;;;;;;;;;;;;;ACFA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;AAAA;AACA;;;;;;;AACA;AAEA;AAAA;AACA;AADA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AAEA;AAEA;;;AAEA;AACA;AACA;;;;;;AAnCA;;;;;;;;;;;;;;ACNA;AACA;;;;;;;;;;;AACA;;;AAEA;AAAA;AACA;AADA;AACA;AACA;AACA;AACA;AACA;AALA;AAMA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AACA;AAEA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AA1BA;;;;;;;;;;;;;;;;ACFA;AAEA;AAAA;AACA;AAAA;AACA;AACA;;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AApBA;;;;;;;;;;;ACAA;AACA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;;;;;;;;;;;;ACvBA;AACA;AAKA;;;;;;;;;;;ACNA;AACA;AAMA;;;;;;;;;;;ACPA;AACA;AAOA;;;","sourceRoot":""}